# Coursera Yellow belt - Final_task
### Дата создания: 14.05.2020
Программа на С++, которая реализует работу с простой базой данных. Программа общается с пользователем через стандартный ввод и вывод.
В БД хранятся пары вида: дата, событие. Дата - строка вида Год-Месяц-День, где Год, Месяц и День — целые числа. 
Есть возможность выбирать и удалять события, удовлетворяющие заданному условию.

Команды
--------
С БД можно взаимодействовать следующими командами:

* **Add** ***date event*** — добавить в базу данных пару (date, event);
* **Print** — вывести всё содержимое базы данных;
* **Find** ***condition*** — вывести все записи, содержащиеся в базе данных, которые удовлетворяют условию condition;
* **Del** ***condition*** — удалить из базы все записи, которые удовлетворяют условию condition;
* **Last** ***date*** — вывести запись с последним событием, случившимся не позже данной даты.

Условия в командах Find и Del накладывают определённые ограничения на даты и события, например:

* **Find date < 2017-11-06** — найти все события, которые случились раньше 6 ноября 2017 года;
* **Del event != "holiday"** — удалить из базы все события, кроме «holiday»;
* **Find date >= 2017-01-01 AND date < 2017-07-01 AND event == "sport event"** — найти всё события «sport event», случившиеся в первой половине 2017 года;
* **Del date < 2017-01-01 AND (event == "holiday" OR event == "sport event")** — удалить из базы все события «holiday» и «sport event», случившиеся до 2017 года.

В командах обоих типов условия могут быть пустыми: под такое условие попадают все события.

Структура программы
-------------------
* **condition_parser.h/cpp** - функция ParseCondition реализует абстрактное синтаксическое дерево для арифметических выражений. Необходим для разбора условий в командах **Find** и **Del**.
* **token.h/cpp** - содержат токенизатор, который используется в функции ParseCondition.
* **date.h/cpp** - содержат объявления и определения класса Date, функции ParseDate и оператора вывода в поток для класса Date.
* **database.h/cpp** - содержат объявление и определение класса Database.
* **node.h/cpp** - содержат объявления и определения класса Node, а также всех его потомков, которые представляют собой узлы абстрактного синтаксического дерева, формируемого функцией ParseCondition.
* **condition_parser_test.cpp** - содержит набор unit-тестов для функции ParseCondition.
* **test_db.h** - содержит набор unit-тестов для проверки работы базы данных.
* **test_runner.h** - фреймворк для unit-тейстов.

Формат ввода и вывода
---------------------
### Команда Add
Командой **Add** ***date event*** программа добавляет пару (**date**, **event**) в базу данных и затем показывает её при поиске (команда **Find**) или печати (команда **Print**).
Одинаковые события, произошедшие в один и тот же день не сохраняются: добавление в базу уже существующей пары (**date**, **event**) игнорируется. В одну и ту же дату может произойти много разных событий, БД умеет их все сохранить.

Поле ***date*** в команде Add имеет формат «*Год-Месяц-День*», где Год — это целое число от 0 до 9999, Месяц — это номер месяца от 1 до 12 включительно, День — это номер дня от 1 до 31 включительно. После даты должен следовать пробел, отделяющий её от события. Примеры корректных дат: **2017-11-07**, **0-2-31**.

Вся остальная часть строки в команде Add задаёт событие. Оно может содержать пробелы, но не может содержать символ кавычки (*"*).

#### Пример
Для команды **Add 2017-11-07 big sport event** программа добавляет в базу данных пару (**2017-11-07, big sport event**).


### Команда Del
Командой **Del** ***condition*** программа удаляет из базы данных все события, удовлетворяющие условию ***condition***, и выводит в стандартный вывод количество удалённых записей ***N*** в формате «**Removed N entries**». Если условие пусто, результатом выполнения команды является очистка всей базы данных.

#### Пример
Ввод

    Add 2017-06-01 1st of June
    Add 2017-07-08 8th of July
    Add 2017-07-08 Someone's birthday
    Del date == 2017-07-08
Вывод

    Removed 2 entries


### Команда Print
Командой Print программа выводит все пары (*дата*, *событие*), которые в данный момент содержатся в базе данных. Пары выводятся по одной в строке, отсортированые по дате по возрастанию. События в рамках одной даты выводятся в порядке добавления (за исключением уже удалённых и попыток добавления повторов).

#### Пример
Ввод

    Add 2017-01-01 Holiday
    Add 2017-03-08 Holiday
    Add 2017-1-1 New Year
    Add 2017-1-1 New Year
    Print
Вывод

    2017-01-01 Holiday
    2017-01-01 New Year
    2017-03-08 Holiday


### Команда Find
Командой **Find** ***condition*** программа выводит все пары (*дата*, *событие*), которые в данный момент содержатся в базе данных и удовлетворяют условию ***condition***. Поиск с пустым условием эквивалентен команде Print. В конце команда выводит строку **Found** ***N*** **entries**, где ***N*** — количество найденных пар.

#### Пример
Ввод

    Add 2017-01-01 Holiday
    Add 2017-03-08 Holiday
    Add 2017-01-01 New Year
    Find event != "working day"
    Add 2017-05-09 Holiday
Вывод

    2017-01-01 Holiday
    2017-01-01 New Year
    2017-03-08 Holiday
    Found 3 entries


### Команда Last
По команде **Last** ***date*** выводится последнее из событий, случившихся к дате ***date***. Если ***date*** меньше всех имеющихся дат, выводится «**No entries**».

#### Пример
Ввод

    Add 2017-01-01 New Year
    Add 2017-03-08 Holiday
    Add 2017-01-01 Holiday
    Last 2016-12-31
    Last 2017-01-01
    Last 2017-06-01
    Add 2017-05-09 Holiday
Вывод

    No entries
    2017-01-01 Holiday
    2017-03-08 Holiday


Пример
-------
Ввод

    Add 2017-11-21 Tuesday
    Add 2017-11-20 Monday
    Add 2017-11-21 Weekly meeting
    Print
    Find event != "Weekly meeting"
    Last 2017-11-30
    Del date > 2017-11-20
    Last 2017-11-30
    Last 2017-11-01

Вывод:

    2017-11-20 Monday
    2017-11-21 Tuesday
    2017-11-21 Weekly meeting
    2017-11-20 Monday
    2017-11-21 Tuesday
    Found 2 entries
    2017-11-21 Weekly meeting
    Removed 2 entries
    2017-11-20 Monday
    No entries
